{% extends 'base.html' %}
{% block content %}
  <div class="content-container">
    <div class="content-header">
      <h4 class="content-title">Dashboard</h4>
      <a href="{{ url_for('voucher.new_voucher') }}" class="btn btn-primary">
        <i class="bi bi-plus me-1"></i>New Voucher
      </a>
    </div>

    <!-- Dashboard Content -->
    <div class="dashboard">
      <div class="left-panel">
        <div>{% include "tracker/_card.html" %}</div>
        <div class="card">
          <h6 class="card-header text-muted py-3">Recent</h6>
          <div class="d-flex justify-content-left gap-2 ps-3">
            <button
              class="btn btn-primary btn-sm"
              hx-post="{{ url_for('voucher.bulk_update_status') }}"
              hx-target="#table-container"
              hx-swap="innerHTML"
              hx-include="#update-status-form"
            >
              Advance Status
            </button>

            <button
              class="btn btn-danger btn-sm"
              hx-post="{{ url_for('voucher.bulk_update_status', target='returned') }}"
              hx-target="#table-container"
              hx-swap="innerHTML"
              hx-include="#update-status-form"
            >
              Mark as Returned
            </button>
          </div>

          <div id="table-container" class="table-container scroll-area">{% include 'voucher/_table.html' %}</div>
        </div>
      </div>

      <div class="right-panel">
        <!-- Analytics Card -->
        <div class="card">
          <h6 class="card-header text-muted">Status History</h6>
          <div class="card-body">
            <p>Select a voucher to view history.</p>
          </div>
        </div>

        <div class="card" id="particulars">
          <h6 class="card-header text-muted">Particulars</h6>
          <div class="card-body" hx-swap="innerHTML">
            <p>Select a voucher to view particulars.</p>
          </div>
        </div>
      </div>
    </div>
  </div>
{% endblock %}

{% block style %}
  <style>
    .dashboard {
      display: grid;
      grid-template-columns: 4fr 2fr; /* Left 70%, Right 30% */
      gap: 1rem;
      min-height: 0;
      overflow: hidden;
    }

    .left-panel {
      display: grid;
      grid-template-rows: auto 1fr; /* Summary + Table */
      gap: 1rem;
      min-height: 0;
    }

    .right-panel {
      display: grid;
      grid-template-rows: 1fr 1fr; /* Analytics + Preview */
      gap: 1rem;
      min-height: 0;
    }
  </style>
{% endblock %}
