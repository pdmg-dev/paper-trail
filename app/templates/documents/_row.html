<!--app/templates/documents/_row.html-->
<tr onclick="window.location='{{ url_for('documents.view_document', doc_id=doc.id) }}'" style="cursor: pointer;">
  <td>{{ doc.reference_number }}</td>
  <td>{{ doc.document_number }}</td>
  <td>{{ doc.payee }}</td>
  <td>{{ doc.origin }}</td>
  <td>{{ doc.amount }}</td>
  <td>{{ doc.date_received.strftime('%Y-%m-%d') }}</td>
  <td>{{ doc.document_type.name }}</td>
  <td onclick="event.stopPropagation()">
    {{ doc.status.name }}
    <button type="button" onclick="toggleForm({{ doc.id }})">Update</button>
  </td>
</tr>

<tr id="form-row-{{ doc.id }}" style="display: none;">
  <td colspan="8" style="background-color: #f9f9f9;">
    <form method="POST" action="{{ url_for('documents.update_status', doc_id=doc.id) }}">
      {{ form[doc.id].hidden_tag() }}
      <label>Status:</label>
      {{ form[doc.id].status }}
      <label>Note (optional):</label>
      <input type="text" name="note" placeholder="Add a note..." />
      <button type="submit">Save</button>
      <button type="button" onclick="toggleForm({{ doc.id }})">Cancel</button>
    </form>
  </td>
</tr>
